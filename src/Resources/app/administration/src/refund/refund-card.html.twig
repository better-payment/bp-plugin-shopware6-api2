{% block sw_order_detail_base_line_items_card %}
    {% parent %}

    <sw-card :title="$tc('betterpayment.refund.title')">
        <template #grid>
            <sw-card-section divider="bottom" slim="true">
                <sw-container columns="1fr 1fr" gap="0px 14px">
                    <sw-number-field
                            required numberType="float" :digits="2" :allowEmpty="false"
                            :label="$tc('betterpayment.refund.amount')"
                            v-model="refund.amount">
                    </sw-number-field>
                    <sw-datepicker
                            :label="$tc('betterpayment.refund.date')"
                            v-model="refund.execution_date">
                    </sw-datepicker>
                </sw-container>
                <sw-textarea-field
                        type="textarea"
                        :label="$tc('betterpayment.refund.comment')"
                        v-model="refund.comment">
                </sw-textarea-field>
                <sw-button-process
                        :processSuccess="processSuccess"
                        :disabled="buttonDisabled"
                        @click="storeRefund"
                        variant="ghost"
                        size="small"
                        @process-finish="storeRefundFinished">
                    {{ $tc('betterpayment.refund.createNew') }}
                </sw-button-process>
            </sw-card-section>
            <sw-data-grid
                    :isLoading="isLoading"
                    :showSelection="false" :showActions="false"
                    :dataSource="refunds" v-if="refunds"
                    :columns="[
                     { property: 'amount', label: $tc('betterpayment.refund.amount') },
                     { property: 'message', label: $tc('betterpayment.refund.comment') },
                     { property: 'created_at', label: $tc('betterpayment.refund.date') }
                ]">
                {# TODO: parse it according to shop setting for datetime #}
            </sw-data-grid>
        </template>
    </sw-card>
{% endblock %}